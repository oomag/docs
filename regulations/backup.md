# Регламент по резервному копированию данных

Данный регламент является рамочным регламентом с рекомендациями по резервному
копированию данных.

## Общие положения

При использовании ПО необходимо обеспечивать меры защиты для сохранности
данных. Одной из таких мер является резервное копирование. В данном регламенте
указаны общие рекомендации по применению резервного копирования на предприятии.

### Указания по применению

Для организации резервного копирования следует руководствоваться следующими
принципами:

* Для организации резервного копирования необходимо использовать имеющиеся
  широко распространенные инструменты и не применять самописные скрипты или
  утилиты
* Инструмент для резервного копирования должен соответствовать области своей
  применяемости. Так, не следует использовать связку из самописного bash
  скрипта и утилиты mysqldump для бэкапа 500Gb данных из высоконагруженной
  production базы данных
* Время хранения бэкапов должно соответствовать ценности данных. Так, хранение
  данных пользователей должно осуществляться так долго, как того просят
  нормативные документы или как можно дольше, если нет иных указаний. Хранение
  же данных кэша не должно превышать время устаревания записей этого кэша.

### Организация хранения

Для организации хранения должна применяться схема с ротацией данных.
Рекомендуется придерживаться схемы с двухуровневым сохранением данных, когда
данные за каждый K-й период резервирования ротируются не с удалением, а с
резервированием на следующий уровень. Это позволит хранить данные за больший
период времени с меньшим потреблением места. Пример: применяется схема с
хранением данных за последние 14 дней со вторым уровнем резервирования на 56
дней понедельно. В таком случае в течение первых 14 дней данные будут
резервироваться на первом уровне; на 15 день данные за 1 день будут ротированы
на второй уровень и удалены с первого уровня; данные на 22 день будут
ротированы на второй уровень и т.д. вплоть до 71 дня. В 71 день после
осуществления резервного копирования данные за 57 день будут ротированы на
второй уровень и удалены с первого, при этом на втором уровне будут удалены
данные за 1 день и таким образом количество слотов для копирования останется
неизменным для всех последующих операций резервирования данных и составит 14
на первом уровне и 8 на втором. В данном примере возможно будет получить данные
за любой из последних 14 дней, после чего за любой из 56 последующих с
периодичностью выборки в неделю.

